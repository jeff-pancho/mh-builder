{"version":3,"sources":["components/Building.js","utils/constants.js","utils/utils.js","components/Grid.js","components/Picker.js","components/Buttons.js","components/BuilderPanel.js","components/Builder.js","index.js"],"names":["Building","row","column","width","height","style","backgroundColor","colour","gridColumn","gridRow","className","WIDTH","HEIGHT","BUILDINGS","name","cssGrid","size","bgColour","background","generateEmptyGrid","Array","fill","map","checkForAvailableSpace","grid","endRow","endColumn","r","c","length","Grid","building","isGhost","id","key","buildingId","onClick","props","removeBuilding","backgroundImage","backgroundSize","SQUARE_SIZE","gridTemplateColumns","gridTemplateRows","buildingElements","this","buildings","filter","renderBuilding","push","buildingGhost","e","onMouseMove","onContextMenu","React","Component","Picker","picks","i","Buttons","handleRotate","handleUndo","handleRedo","handleClear","BuilderPanel","children","Builder","state","history","currentBuilding","mousePos","stateNumber","slice","current","JSON","parse","stringify","concat","createBuilding","setState","renderBuildingGhost","rect","currentTarget","getBoundingClientRect","x","clientX","left","y","clientY","top","relativeCoords","Math","floor","prevRow","prevColumn","preventDefault","mouseRow","mouseColumn","currentBuildingCopy","temp","handleOnClick","handleOnMouseMove","handleRemoveBuilding","handlePicker","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.97ac4c47.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Building = ({row, column, width, height, colour}) => {\r\n    let style = {\r\n        backgroundColor: colour,\r\n        gridColumn: column + 1 + \" / span \" + width,\r\n        gridRow: row + 1 + \" / span \" + height\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className=\"building\"\r\n            style={style}\r\n        >\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default Building;","// 46x46 original size\r\nexport const WIDTH = 46;\r\nexport const HEIGHT = 46;\r\nexport const SQUARE_SIZE = 15;\r\n\r\nexport const BUILDINGS = [\r\n    {\r\n        name: \"conveyor\",\r\n        width: 2,\r\n        height: 2,\r\n        colour: \"#262626\"\r\n    },\r\n    {\r\n        name: \"large conveyor ramp\",\r\n        width: 5,\r\n        height: 2,\r\n        colour: \"#3D3D3D\"\r\n    },\r\n    {\r\n        name: \"iron mine\",\r\n        width: 2,\r\n        height: 2,\r\n        colour: \"#777777\"\r\n    },\r\n    {\r\n        name: \"furnace\",\r\n        width: 2,\r\n        height: 2,\r\n        colour: \"#C76D6D\"\r\n    },\r\n    {\r\n        name: \"azure refiner\",\r\n        width: 4,\r\n        height: 6,\r\n        colour: \"#2FB3F5\"\r\n    },\r\n    {\r\n        name: \"portable ore advancer\",\r\n        width: 3,\r\n        height: 2,\r\n        colour: \"#8C17EB\"\r\n    },\r\n    {\r\n        name: \"big bad blaster\",\r\n        width: 3,\r\n        height: 2,\r\n        colour: \"#DE7914\"\r\n    },\r\n    {\r\n        name: \"tesla resetter\",\r\n        width: 8,\r\n        height: 6,\r\n        colour: \"#D3D61C\"\r\n    }\r\n];","const cssGrid = (size, bgColour) => {\r\n    // let background = bgColour + \" \";\r\n    let background = \"\";\r\n    background += \"linear-gradient(to right, \";\r\n    background += \"transparent \" + (size - 1) + \"px, \";\r\n    background += \"black \" + (size - 1) + \"px, \";\r\n    background += \"black \" + size + \"px), \";\r\n    background += \"linear-gradient(to bottom, \";\r\n    background += \"transparent \" + (size - 1) + \"px, \";\r\n    background += \"black \" + (size - 1) + \"px, \";\r\n    background += \"black \" + size + \"px)\";\r\n    return background;\r\n}\r\n\r\nconst relativeCoords = (e) => {\r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    const x = e.clientX - rect.left;\r\n    const y = e.clientY - rect.top;\r\n    return {x, y};\r\n}\r\n\r\nconst generateEmptyGrid = (width, height) => {\r\n    const grid = Array(height).fill().map(() => {\r\n        return Array(width).fill(null);\r\n    });\r\n    return grid;\r\n}\r\n\r\nconst checkForAvailableSpace = (grid, row, column, width, height) => {\r\n    const endRow = row + height;\r\n    const endColumn = column + width;\r\n    for (let r = row; r < endRow; r++) {\r\n        for (let c = column; c < endColumn; c++) {\r\n            if (r > grid.length - 1 || c > grid[r].length - 1\r\n                || grid[r][c] !== null) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\nexport { \r\n    cssGrid,\r\n    relativeCoords,\r\n    generateEmptyGrid,\r\n    checkForAvailableSpace\r\n};","import React from \"react\";\r\nimport Building from \"./Building\";\r\nimport { WIDTH, HEIGHT, SQUARE_SIZE } from \"../utils/constants\";\r\nimport { cssGrid } from \"../utils/utils\";\r\n\r\nclass Grid extends React.Component {\r\n    renderBuilding(building, isGhost, id) {\r\n        const { row, column } = building;\r\n        const key = isGhost ? \"ghost\" : `${row},${column}`;\r\n        \r\n        return (\r\n            <Building \r\n                key={key} \r\n                buildingId={id}\r\n                onClick={() => this.props.removeBuilding(id)}\r\n                { ...building }\r\n            />\r\n        );\r\n    }\r\n\r\n    render() {\r\n        let style = {\r\n            width: SQUARE_SIZE * WIDTH,\r\n            height: SQUARE_SIZE * HEIGHT,\r\n            backgroundImage: cssGrid(SQUARE_SIZE),\r\n            backgroundSize: SQUARE_SIZE + \"px \" + SQUARE_SIZE + \"px\",\r\n            gridTemplateColumns: \"repeat(\" + WIDTH + \", \" + SQUARE_SIZE + \"px)\",\r\n            gridTemplateRows: \"repeat(\" + HEIGHT + \", \" + SQUARE_SIZE + \"px)\"\r\n        };\r\n\r\n        let buildingElements = this.props.buildings.filter(\r\n            (building) => {\r\n                return building !== null;\r\n            }\r\n        ).map((building, id) => {\r\n            return this.renderBuilding(building, false, id);\r\n        });\r\n        buildingElements.push(\r\n            this.renderBuilding(this.props.buildingGhost, true)\r\n        );\r\n\r\n        return (\r\n            <div\r\n                className=\"grid\" \r\n                style={style}\r\n                onClick={(e) => this.props.onClick(e)}\r\n                onMouseMove={(e) => this.props.onMouseMove(e)}\r\n                onContextMenu={(e) => this.props.onContextMenu(e)}\r\n            >\r\n                {buildingElements}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Grid;","import React from \"react\";\r\nimport { BUILDINGS } from \"../utils/constants\";\r\n\r\nconst Picker = ({ onClick }) => {\r\n    let picks = BUILDINGS.map((building, i) => {\r\n        let { colour } = building;\r\n        return (\r\n            <div\r\n                key={i}\r\n                className=\"square\"\r\n                style={{backgroundColor: colour}}\r\n                onClick={() => onClick(building)}\r\n            >\r\n            </div>\r\n        );\r\n    });\r\n\r\n    return (\r\n        <div className=\"picker-container\">\r\n            {picks}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Picker;","import React from \"react\";\r\n\r\nconst Buttons = ({ handleRotate, handleUndo, handleRedo, handleClear }) => {\r\n    return (\r\n        <div className=\"buttons-container\">\r\n            <button onClick={() => handleRotate()}>Rotate</button>\r\n            <button onClick={() => handleUndo()}>Undo</button>\r\n            <button onClick={() => handleRedo()}>Redo</button>\r\n            <button onClick={() => handleClear()}>Clear</button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Buttons;","import React from \"react\";\r\n\r\nconst BuilderPanel = ({ children }) => {\r\n    return (\r\n        <div className=\"builder-container\">\r\n            {children}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default BuilderPanel;","import React from \"react\";\r\nimport Grid from \"./Grid\";\r\nimport Picker from \"./Picker\";\r\nimport Buttons from \"./Buttons\";\r\n\r\nimport BuilderPanel from \"./BuilderPanel\";\r\n\r\nimport { WIDTH, HEIGHT, SQUARE_SIZE, BUILDINGS } from \"../utils/constants\";\r\nimport { \r\n    relativeCoords,\r\n    generateEmptyGrid,\r\n    checkForAvailableSpace\r\n} from \"../utils/utils\";\r\n\r\nclass Builder extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            history: [{\r\n                buildings: [],\r\n                grid: generateEmptyGrid(WIDTH, HEIGHT),\r\n            }],\r\n            currentBuilding: BUILDINGS[0],\r\n            mousePos: { row: 0, column: 0 },\r\n            buildingGhost: BUILDINGS[0],\r\n            stateNumber: 0\r\n        };\r\n    }\r\n\r\n    createBuilding(row, column, building) {\r\n        return {\r\n            row: row,\r\n            column: column,\r\n            ...building\r\n        };\r\n    }\r\n    \r\n    handleOnClick() {\r\n        const { width, height } = this.state.currentBuilding;\r\n        const { row, column } = this.state.mousePos;\r\n        const endRow = row + height;\r\n        const endColumn = column + width;\r\n\r\n        const history = this.state.history.slice(0, this.state.stateNumber + 1);\r\n        // deep-copy of object\r\n        const current = JSON.parse(JSON.stringify(history[this.state.stateNumber]));\r\n        const grid = current.grid.slice()\r\n        \r\n        if (checkForAvailableSpace(grid, row, column, width, height)) {\r\n            let buildings = current.buildings.slice();\r\n\r\n            for (let r = row; r < endRow; r++) {\r\n                for (let c = column; c < endColumn; c++) {\r\n                    grid[r][c] = buildings.length;\r\n                }\r\n            }\r\n            \r\n            buildings = buildings.concat([\r\n                this.createBuilding(row, column, this.state.currentBuilding)\r\n            ]);\r\n\r\n            this.setState({\r\n                history: history.concat([{\r\n                    buildings: buildings,\r\n                    grid: grid\r\n                }]),\r\n                stateNumber: this.state.stateNumber + 1,\r\n                buildingGhost: this.renderBuildingGhost(row, column)\r\n            });\r\n        }\r\n    }\r\n\r\n    handleOnMouseMove(e) {\r\n        const { x, y } = relativeCoords(e);\r\n        const row = Math.floor(y / SQUARE_SIZE);\r\n        const column = Math.floor(x / SQUARE_SIZE);\r\n        const {row: prevRow, column: prevColumn} = this.state.mousePos;\r\n        \r\n        if (row !== prevRow || column !== prevColumn) {\r\n            // update to new row/column pos\r\n            this.setState({\r\n                mousePos: {row: row, column: column},\r\n                buildingGhost: this.renderBuildingGhost(row, column)\r\n            });\r\n            \r\n            // console.log({row: row, column: column});\r\n        }\r\n    }\r\n\r\n    handleRemoveBuilding(e) {\r\n        e.preventDefault();\r\n        const history = this.state.history.slice(0, this.state.stateNumber + 1);\r\n        const current = JSON.parse(JSON.stringify(history[this.state.stateNumber]));\r\n        const grid = current.grid.slice();\r\n        const {row: mouseRow, column: mouseColumn} = this.state.mousePos;\r\n        const id = grid[mouseRow][mouseColumn];\r\n\r\n        if (id !== null) {\r\n            const buildings = current.buildings.slice();\r\n            const { row, column, width, height } = buildings[id];\r\n            const endRow = row + height;\r\n            const endColumn = column + width;\r\n\r\n            for (let r = row; r < endRow; r++) {\r\n                for (let c = column; c < endColumn; c++) {\r\n                    grid[r][c] = null;\r\n                }\r\n            }\r\n            buildings[id] = null;\r\n\r\n            this.setState({\r\n                history: history.concat([{\r\n                    buildings: buildings,\r\n                    grid: grid\r\n                }]),\r\n                stateNumber: this.state.stateNumber + 1,\r\n                buildingGhost: this.renderBuildingGhost(mouseRow, mouseColumn)\r\n            });\r\n        }\r\n    }\r\n\r\n    handlePicker(building) {\r\n        this.setState({\r\n            currentBuilding: building\r\n        });\r\n    }\r\n\r\n    renderBuildingGhost(row, column) {\r\n        const history = this.state.history.slice(0, this.state.stateNumber + 1);\r\n        const current = history[this.state.stateNumber];\r\n        const grid = current.grid.slice();\r\n        const { width, height } = this.state.currentBuilding;\r\n        const buildingGhost = this.createBuilding(row, column, this.state.currentBuilding);\r\n        if (!checkForAvailableSpace(grid, row, column, width, height)) {\r\n            buildingGhost.colour = \"#8a0000\";\r\n        }\r\n        \r\n        return buildingGhost;\r\n    }\r\n\r\n    handleUndo() {\r\n        if (this.state.stateNumber > 0) {\r\n            this.setState({\r\n                stateNumber: this.state.stateNumber - 1\r\n            });\r\n        }\r\n    }\r\n\r\n    handleRedo() {\r\n        if (this.state.stateNumber < this.state.history.length - 1) {\r\n            this.setState({\r\n                stateNumber: this.state.stateNumber + 1\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    handleClear() {\r\n        const history = this.state.history.slice(0, this.state.stateNumber + 1);\r\n\r\n        this.setState({\r\n            history: history.concat([{\r\n                buildings: [],\r\n                grid: generateEmptyGrid(WIDTH, HEIGHT),\r\n            }]),\r\n            stateNumber: this.state.stateNumber + 1\r\n        });\r\n    }\r\n\r\n    handleRotate() {\r\n        let currentBuildingCopy = JSON.parse(\r\n            JSON.stringify(this.state.currentBuilding)\r\n        );\r\n        let temp = currentBuildingCopy.width;\r\n        currentBuildingCopy.width = currentBuildingCopy.height;\r\n        currentBuildingCopy.height = temp;\r\n        \r\n        this.setState({\r\n            currentBuilding: currentBuildingCopy\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const history = this.state.history;\r\n        const current = history[this.state.stateNumber];\r\n\r\n        return (\r\n            <BuilderPanel>\r\n                <Grid \r\n                    buildings={current.buildings}\r\n                    buildingGhost={this.state.buildingGhost}\r\n                    onClick={() => this.handleOnClick()}\r\n                    onMouseMove={(e) => this.handleOnMouseMove(e)}\r\n                    onContextMenu={(e) => this.handleRemoveBuilding(e)} \r\n                />\r\n                <Picker onClick={(building) => this.handlePicker(building)} />\r\n                <Buttons\r\n                    handleRotate={() => this.handleRotate()}\r\n                    handleUndo={() => this.handleUndo()}\r\n                    handleRedo={() => this.handleRedo()}\r\n                    handleClear={() => this.handleClear()}\r\n                />\r\n            </BuilderPanel>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Builder;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport Builder from \"./components/Builder.js\"\r\n\r\nReactDOM.render(\r\n    <Builder />,\r\n    document.getElementById('root')\r\n);"],"sourceRoot":""}